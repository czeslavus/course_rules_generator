<section class="card shadow-sm">
  <div class="card-body">
    <h2 class="h5 card-title mb-3">
      {{ 'RULES.POINT_THREE.TITLE' | translate }}
    </h2>

    <div class="row g-3">
      <div class="col-6">
        @if (!selectedTypes().length) {
          <div class="alert alert-secondary mb-0" role="status">
            {{ 'RULES.POINT_THREE.SELECT_CLASS_TYPE_HINT' | translate }}
          </div>
        } @else {
          <div class="d-grid gap-3">
            @for (type of selectedTypes(); track type.id) {
              <fieldset class="border rounded p-3">
                <legend class="float-none w-auto px-2 mb-2 fs-6 fw-semibold">{{ type.label | translate }}</legend>

                <div class="mb-3">
                  <label class="form-label" [for]="'point3-rules-' + type.id">{{ 'RULES.POINT_THREE.VERIFICATION_RULES' | translate }}</label>
                  <textarea
                    class="form-control"
                    rows="4"
                    [id]="'point3-rules-' + type.id"
                    [ngModel]="getParams(type.id).verificationRules"
                    (ngModelChange)="updateVerificationRules(type.id, $event)"
                  ></textarea>
                </div>

                <div>
                  <label class="form-label" [for]="'point3-materials-' + type.id">
                    {{ 'RULES.POINT_THREE.HELPER_MATERIALS' | translate }}
                  </label>
                  <textarea
                    class="form-control"
                    rows="2"
                    [id]="'point3-materials-' + type.id"
                    [ngModel]="getParams(type.id).helperMaterials"
                    (ngModelChange)="updateHelperMaterials(type.id, $event)"
                    [placeholder]="'RULES.POINT_THREE.HELPER_MATERIALS_PLACEHOLDER' | translate"
                  ></textarea>
                </div>
              </fieldset>
            }
          </div>
        }
      </div>

      <div class="col-6">
        <div class="border rounded p-3 h-100 bg-body-tertiary d-flex flex-column">
          <h3 class="h6 mb-2">{{ 'RULES.COMMON.GENERATED_TEXT' | translate }}</h3>
          <textarea class="form-control flex-grow-1" rows="8" readonly [value]="generatedText()"></textarea>
          <button
            type="button"
            class="btn btn-primary btn-sm mt-3 align-self-start"
            (click)="copyGeneratedText()"
            [disabled]="!generatedText()"
          >
            {{ 'RULES.COMMON.COPY_TO_CLIPBOARD' | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
